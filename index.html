<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Oosu Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Do+Hyeon&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="stylesheet" href="style/greeting.css">
  <link rel="stylesheet" href="style/slider.css">
  <link rel="stylesheet" href="./common/common.css">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
</head>

<body>
  <div class="background-image"></div>

  <svg width="0" height="0" style="position:absolute; z-index:-1;">
    <defs>
      <filter id="classicWetInk">
        <feTurbulence type="fractalNoise" baseFrequency="0.02 0.04" numOctaves="3" seed="1" result="noise" />
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="6" xChannelSelector="R" yChannelSelector="G"
          result="displaced" />
        <feGaussianBlur in="displaced" stdDeviation="2" result="blurred" />
      </filter>
      <filter id="lightTextInk">
        <feTurbulence type="fractalNoise" baseFrequency="0.04 0.08" numOctaves="2" seed="3" result="lightNoise" />
        <feDisplacementMap in="SourceGraphic" in2="lightNoise" scale="5" xChannelSelector="R" yChannelSelector="G"
          result="lightDisplaced" />
        <feGaussianBlur in="lightDisplaced" stdDeviation="0.8" result="lightBlurred" />
      </filter>
      <filter id="inkParticleSurface">
        <feTurbulence type="fractalNoise" baseFrequency="0.15 0.3" numOctaves="2" seed="2" result="particleNoise" />
        <feDisplacementMap in="SourceGraphic" in2="particleNoise" scale="4" xChannelSelector="R" yChannelSelector="G"
          result="particleDisplaced" />
        <feGaussianBlur in="particleDisplaced" stdDeviation="0.7" result="particleBlurred" />
      </filter>
      <filter id="inkSpreadEffectFilter">
        <feTurbulence type="fractalNoise" baseFrequency="0.05 0.1" numOctaves="2" seed="6" result="spreadNoise" />
        <feDisplacementMap in="SourceGraphic" in2="spreadNoise" scale="6" xChannelSelector="R" yChannelSelector="G"
          result="spreadDisplaced" />
        <feGaussianBlur in="spreadDisplaced" stdDeviation="1.5" result="spreadBlurred" />
      </filter>
    </defs>
  </svg>

  <div class="container texture-background" id="preloaderContainer" style="display: none; opacity: 0;">
    <div id="darkModeToggleWrapper" style="position: fixed; top: 15px; right: 15px; width: 70px; height: 70px; cursor: var(--cursor-grab); z-index: 1000; background-color: rgba(93, 76, 76, 0.1); border-radius: 50%;">
        <div id="darkModeToggleContainer"></div> </div>

    <div class="intro-section">
      <h1 class="intro-greeting">
        <span data-node-name="greeting">Hello</span>
        <span data-node-name="name">there!</span>
      </h1>
      <p class="intro-text-wrapper">
        <span class="intro-text" data-node-name="greetingText1"></span>
        <span class="intro-text" data-node-name="greetingText2"></span>
      </p>
    </div>
    <div class="product-statement">
      <p data-node-name="text1">Working on a portfolio like any other...</p>
    </div>
    <div class="idea-statements">
      <p class="idea-1" data-node-name="text2">That's what I was going to do.</p>
      <p class="idea-2" data-node-name="text3">But then I stopped.</p>
    </div>

    <div class="chatbox-section">
      <div class="text-box">
        <p class="portfolio-chatbox" data-node-name="textInChatBox">A static, ordinary page. Just text and images.
          Nothing special.</p>
        <p class="fake-btn" data-node-name="sendButtonLabel">Create</p>
      </div>
    </div>
    <div class="idea-statements-continued">
      <p class="idea-3">
        <span data-node-name="text4">I realized, I wanted to create something</span>
        <strong data-node-name="text4Adjective">dynamic</strong>.
      </p>
      <p class="idea-4" data-node-name="text5Entry">Because,</p>
      <p class="idea-5">
        <span data-node-name="text5ContentPart1">Design is about more</span>
        <span data-node-name="text5ContentPart2">story</span>
        <span class="smiley" data-node-name="smiley">:)</span>
      </p>
      <p class="idea-6">
        <span data-node-name="bigTextPart1">U</span>
        <span data-node-name="bigTextPart2">X</span>
      </p>
    </div>
    <div class="uxui-design-section">
      <img src="img/creative_process.png" alt="" class="image-path" data-node-name="imagePath">
      <img src="img/lightbulb.svg" alt="" class="lightbulb">
      <div class="wish-message">
        <div class="heading-gap"></div>
        <h3 class="heading-main">
          <span class="heading-part1" data-node-name="wishHeadingPart1">Your Story,</span>
          <span class="heading-part2" data-node-name="wishHeadingPart2">My Design!</span>
        </h3>
        <h5 data-node-name="wishText">Where creativity meets functionality.</h5>
      </div>
    </div>

    <div class="final-message-section">
      <p data-node-name="outroText">Ready to explore?</p>
      <p id="replay" data-node-name="replayText">Click here to refresh the experience.</p>
      <p class="last-smile" data-node-name="outroSmiley">:)
      </p>
    </div>

    <div class="baloons-animate">
      <div class="baloons">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
      </div>
    </div>
    <div class="blank-interlude"></div>

    <canvas id="circlesCanvas" class="circles-canvas"></canvas>
  </div>

  <div class="controls" id="controls" style="display: none; opacity: 0;">
    <div class="handle">...</div>
    <button id="playBtn">▶</button>
    <button id="pauseBtn">⏸</button>
    <button id="rewindBtn">⏮</button>
    <button id="fastForwardBtn">⏭</button>
    <button id="skipBtn">×</button>
  </div>

<div id="inboxwrapper">
  <div id="inboxIconContainer">
    <div id="inboxCircle"></div>
  </div>
</div>

  <div class="slider-container" id="mainPortfolio">
    <div id="preloader">
      <div class="loading-text" id="loadingText"></div>
    </div>
    
    <div class="slide" id="slide1">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-anton">OH. SO. GOOD</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide2">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-anton">OOSU HADA</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide3">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-dohyeon">우수하다</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide4">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-hiragino">佑守</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide5">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-hiragino">優秀</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide6">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-hiragino">憂愁</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide7">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-anton">OH. SO.</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide8">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-anton">OOSU</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide9">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-dohyeon">우수</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <div class="slide" id="slide10">
      <div class="slide-content">
        <div class="slide-padding1"></div>
        <h1 class="slide-title font-anton">YÒU SHǑU</h1>
        <div class="slide-padding2"></div>
        <a href="project/project.html?from=index" class="welcome-banner-link">
          <div class="welcome-banner"><span>Welcome to my playground</span></div>
        </a>
      </div>
    </div>
    <button class="nav-button prev" id="prevBtn">&#10094;</button>
    <button class="nav-button next" id="nextBtn">&#10095;</button>

    <div class="page-indicator">
      <span id="currentPage">1</span> / <span id="totalPages">10</span>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script type="application/javascript" src="script/canvasCircles.js"></script>
  <script type="application/javascript" src="script/greeting.js"></script>
  <script type="application/javascript" src="script/slider.js"></script>
  <script src="./common/common.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
    const inboxIconContainer = document.getElementById('inboxIconContainer');
    const darkModeToggleWrapper = document.getElementById('darkModeToggleWrapper'); // Get the wrapper

    // Lottie animation for inbox icon (loop 없이, 0.8배속, 재생 후 1.2초 쉼)
    if (inboxIconContainer) {
        const animationInbox = lottie.loadAnimation({
            container: inboxIconContainer,
            renderer: 'svg',
            loop: false, // 한 번만 재생
            autoplay: true,
            path: 'https://gist.githubusercontent.com/oosuhada/260471d9b7e2acfde4377ee6a895093c/raw/6dffaeafd1ab43ead99273b654e011dbd1ab4718/message-envelope.json'
        });

        animationInbox.setSpeed(0.8); // 0.8배속

        // 루프 대신 완료 후 잠깐(1.2초) 쉬었다가 다시 재생
        const delayMs = 1200;
        animationInbox.addEventListener('complete', function () {
            setTimeout(() => {
                animationInbox.goToAndPlay(0, true);
            }, delayMs);
        });

        inboxIconContainer.addEventListener('click', () => {
            // Hide main portfolio and stop its balloon effects
            gsap.to('#mainPortfolio', {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    document.getElementById('mainPortfolio').style.display = 'none';
                    window.stopBalloonInterval(); // Stop balloons from slider.js

                    // Show greeting container and controls
                    document.getElementById('preloaderContainer').style.display = 'block';
                    document.getElementById('controls').style.display = 'block';
                    gsap.fromTo('#preloaderContainer', { opacity: 0 }, { opacity: 1, duration: 0.5 });
                    gsap.fromTo('#controls', { opacity: 0 }, { opacity: 1, duration: 0.5 });

                    // Show dark mode toggle wrapper and its container
                    if (darkModeToggleWrapper) {
                        darkModeToggleWrapper.style.display = 'flex'; // Make wrapper visible as flex
                        gsap.fromTo(darkModeToggleWrapper, { opacity: 0 }, { opacity: 1, duration: 0.5 });

                        // ✅ Add this block to ensure Lottie visibility and resize when entering greeting
                        const darkModeToggleContainer = document.getElementById('darkModeToggleContainer');
                        if (darkModeToggleContainer && window.animationDarkMode) {
                            // These styles should already be set in greeting.js, but re-asserting for clarity
                            darkModeToggleContainer.style.display = 'block';
                            darkModeToggleContainer.style.opacity = '1';
                            darkModeToggleContainer.style.width = '100%';
                            darkModeToggleContainer.style.height = '100%';
                            darkModeToggleContainer.style.position = 'absolute';

                            setTimeout(() => {
                                window.animationDarkMode.resize(); // Use the globally exposed animationDarkMode
                            }, 100);
                        }
                    }

                    // Hide inbox icon
                    if (inboxIconContainer) {
                        inboxIconContainer.style.display = 'none';
                        gsap.to(inboxIconContainer, { opacity: 0, duration: 0.2 });
                    }

                    // Ensure greeting animation starts from the beginning
                    if (window.tl) {
                        window.tl.restart(true); // restart(true) forces a full reset
                    } else {
                        console.warn("GSAP timeline 'tl' not yet defined in greeting.js. Fetching data and starting animation.");
                        window.fetchData(); // This will create and run tl
                    }
                }
            });
        });
    }

    // Dark mode toggle logic (now simpler, as Lottie setup is in greeting.js)
    const darkModeToggleContainer = document.getElementById('darkModeToggleContainer');
    if (darkModeToggleContainer && window.animationDarkMode) {
        let isDarkMode = false; // State for dark mode
        window.animationDarkMode.goToAndStop(0, true);

        if (darkModeToggleWrapper) {
            darkModeToggleWrapper.addEventListener('click', () => {
                const preloaderContainer = document.getElementById('preloaderContainer');
                if (isDarkMode) {
                    window.animationDarkMode.setDirection(-1);
                    window.animationDarkMode.play();
                    preloaderContainer.classList.remove('dark-theme');
                } else {
                    window.animationDarkMode.setDirection(1);
                    window.animationDarkMode.play();
                    preloaderContainer.classList.add('dark-theme');
                }
                isDarkMode = !isDarkMode;
            });
        }
    }
});
</script>
</body>
</html>