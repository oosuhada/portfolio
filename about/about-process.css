/* =================== PROCESS SECTION (Galaxy Orbit Theme) =================== */

.about-process {
  position: relative;
  overflow: hidden;
}

.about-process .section-title {
  margin-bottom: 2rem !important;
  font-family: 'Pretendard', sans-serif;
  letter-spacing: 0.05em;
  font-weight: 700;
  color: #222;
  text-shadow: 0 1px 3px rgba(0,0,0,0.1);
  position: relative;
  z-index: 2;
}

/* Flex container for galaxy and cards */
.process-container {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 2rem;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  
  /* 배경 제거 */
  background: none; /* 배경색 제거 */
  /* backdrop-filter: blur(8px); 제거 */
  /* border-radius: 15px; 제거 */
  /* border: 1px solid rgba(0, 0, 0, 0.08); 제거 */
  /* box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07); 제거 */
  
  /* overflow visible로 변경 */
  overflow: visible; /* 이제 내부 요소가 넘쳐도 잘리지 않음 */
}

@media (max-width: 820px) {
  .process-container {
      flex-direction: column;
      align-items: center;
  }
}

/* New wrapper for the entire galaxy visual and content */
.process-galaxy-container {
    width: 50%; /* 이 값은 process-container 내에서 비율을 유지 */
    height: 500px;
    position: relative;
    
    /* 그림자는 이제 process-galaxy-visual이 가집니다. */
    /* box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); 제거 */
    
    border-radius: 15px; /* 전체 컨테이너의 기본 둥근 모서리 */
    overflow: visible;
    /* process-container의 overflow:visible 때문에 이 부분의 overflow는 의미가 없습니다. */
}

@media (max-width: 820px) {
  .process-galaxy-container {
      /*
       * 기존:
       * width: 100%;
       * height: 400px;
       */

      /* 수정: 화면 너비에 비례하여 크기 조절 */
      width: 90vw; /* 뷰포트 너비의 90% */
      height: 55vw; /* 뷰포트 너비의 55% (대략 1.6:1 비율) */
      max-height: 400px; /* 너무 커지지 않도록 최대 높이 설정 (선택 사항) */
      max-width: 400px; /* 너무 커지지 않도록 최대 너비 설정 (선택 사항) */
  }
}

/* Visual layer: Handles ink blot background and its filter */
.process-galaxy-visual {
    position: absolute;
    top: 5%; /* process-galaxy-container 내에서 중앙에 가깝게 조정 */
    left: 5%; /* process-galaxy-container 내에서 중앙에 가깝게 조정 */
    width: 90%; /* ★ process-galaxy-container의 90%로 줄임 */
    height: 90%; /* ★ process-galaxy-container의 90%로 줄임 */
    
    /* 강화된 그라디언트 효과: 중앙으로 갈수록 더 진해지도록 조정 */
    background: radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.6) 0%, transparent 60%),
                radial-gradient(circle at 80% 70%, rgba(0, 0, 0, 0.5) 0%, transparent 50%),
                #0a0a0a; /* 더 어두운 기본 배경색 */
    
    /* 울퉁불퉁하고 나선형처럼 뻗어나가는 테두리 형태 */
    border-radius: 70% 25% 65% 30% / 65% 30% 70% 25%;

    
    transform: rotate(1deg) skewX(-1deg) scale(1.02); 

    filter: blur(8px) contrast(1.5); 
    
    opacity: 0.85; 
    
    transition: border-radius 0.7s ease-out, transform 0.7s ease-out, filter 0.5s ease-out, opacity 0.3s ease;
    z-index: 1; /* 가장 아래 레이어 */

    /* 잉크 번짐 효과의 그림자를 여기에 적용 */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); 
}

/* process-galaxy-container에 hover 시 잉크 번짐 테두리 변화 */
.process-galaxy-container:hover .process-galaxy-visual {
  border-radius: 65% 20% 50% 20% / 60% 25% 65% 20%; 
    transform: rotate(-0.5deg) skewX(0.5deg) scale(1.03); 
    filter: blur(6px) contrast(1.8); 
    opacity: 1;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); 
}

/* Content layer: Holds non-filtered elements (orbit, planets) */
.process-galaxy-content {
    position: absolute;
    top: 5%; /* process-galaxy-visual과 동일하게 조정 */
    left: 5%; /* process-galaxy-visual과 동일하게 조정 */
    width: 90%; /* process-galaxy-visual과 동일하게 조정 */
    height: 90%; /* process-galaxy-visual과 동일하게 조정 */
    background-color: transparent; /* 투명 배경 */
    
    /* process-galaxy-visual과 동일한 border-radius와 transform을 적용하여 잘리는 모양을 맞춥니다. */
    border-radius: 15% 20% 18% 25% / 20% 15% 25% 18%; 
    transform: rotate(1deg) skewX(-1deg) scale(1.02); 
    
    z-index: 2; /* Visual layer 위에 위치 */
    transition: border-radius 0.7s ease-out, transform 0.7s ease-out; /* 변화 부드럽게 */
    
    /* ★ star-field를 이곳에 배치하기 위해 overflow: hidden 추가 */
    overflow: visible; 
}

/* process-galaxy-container에 hover 시 content layer도 동일하게 변형 */
.process-galaxy-container:hover .process-galaxy-content {
    border-radius: 18% 15% 22% 16% / 12% 20% 16% 22%; 
    transform: rotate(-0.5deg) skewX(0.5deg) scale(1.03); 
}


/* Star field - process-galaxy-content 내부에 위치 */
.star-field {
  position: absolute;
  width: 100%; /* 부모(process-galaxy-content)에 맞춰 100% */
  height: 100%; /* 부모(process-galaxy-content)에 맞춰 100% */
  filter: blur(0.5px); /* 별 자체의 블러 */
  opacity: 0.6; 
  z-index: 1; /* process-galaxy-content 내에서 가장 낮은 z-index */
  overflow: visible;
}

.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 3s infinite alternate;
}

@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(1); }
  100% { opacity: 1; transform: scale(1.2); }
}

/* Elliptical orbit (SVG version) - process-galaxy-content 내부에 위치 */
.process-orbit-svg {
  position: absolute;
  top: 50%;
  left: 50%;
  /* ★ 컨테이너의 80%로 크기 조정 */
  width: 80%; /* 기존 450px 대신 부모 요소의 80% */
  height: 80%; /* 기존 225px 대신 부모 요소의 80% */
  transform: translate(-50%, -50%) rotate(-45deg);
  overflow: visible;
  z-index: 3; /* process-galaxy-content 내에서 star-field 위에, 행성 아래 */
}

@media (max-width: 820px) {
  .process-orbit-svg {
      width: 80%; /* 기존 350px 대신 부모 요소의 80% */
      height: 80%; /* 기존 175px 대신 부모 요소의 80% */
  }
}

#orbitPath {
  fill: none;
  stroke: rgba(255, 255, 255, 0.3);
  stroke-width: 2;
}

/* Planets - process-galaxy-content 내부에 위치 */
.process-planet {
  position: absolute;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: rgba(30, 30, 30, 0.8);
  box-shadow: 0 0 15px rgba(255,255,255,0.08), inset 0 0 5px rgba(255,255,255,0.05);
  border: 1px solid rgba(255, 255, 255, 0.05);
  cursor: pointer;
  z-index: 4; /* process-galaxy-content 내에서 가장 위에 배치 */
  transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
}

.process-planet:hover {
  transform: translate(-50%, -50%) var(--planet-rotate, rotate(0deg)) scale(1.1) !important;
  background: rgba(50, 50, 50, 0.9);
  box-shadow: 0 0 20px rgba(255,255,255,0.15), inset 0 0 8px rgba(255,255,255,0.1);
}

.process-planet.is-active {
  transform: translate(-50%, -50%) var(--planet-rotate, rotate(0deg)) scale(1.2) !important;
  background: rgba(80, 80, 80, 0.95);
  box-shadow: 0 0 25px rgba(255,255,255,0.2), 0 0 10px rgba(200, 65, 49, 0.5), inset 0 0 10px rgba(255,255,255,0.2);
}

.planet-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transform: rotate(-45deg);
}

.process-planet .planet-icon {
  font-size: 1.8rem;
  margin-bottom: 3px;
  color: rgba(200, 200, 200, 0.9);
  transition: color 0.2s ease;
}

.process-planet .planet-label {
  font-family: 'Pretendard', sans-serif;
  font-size: 0.7rem;
  font-weight: bold;
  line-height: 1;
  opacity: 0.8;
  color: rgba(200, 200, 200, 0.9);
  transition: color 0.2s ease;
}

.process-planet:hover .planet-icon,
.process-planet:hover .planet-label,
.process-planet.is-active .planet-icon,
.process-planet.is-active .planet-label {
  color: white;
  opacity: 1;
}

.process-planet.discover,
.process-planet.define,
.process-planet.design,
.process-planet.deliver {
    background: rgba(30, 30, 30, 0.8);
}


/* Card styles - 기존 한지 테마 스타일 유지 (강조색 #C84131) */
.about-process-cols {
  display: grid;
  grid-template-columns: repeat(2, minmax(200px, 1fr));
  gap: 1.2rem 1rem;
  width: 50%;
  z-index: 2;
}

@media (max-width: 820px) {
  .about-process-cols {
      width: 100%;
      max-width: 500px;
      grid-template-columns: 1fr;
      gap: 1.3rem;
  }
}

.process-card {
  background: rgba(250, 250, 250, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07);
  font-family: 'Pretendard', 'Noto Serif TC', serif;
  padding: 1.5rem 2rem;
  color: #333;
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
  cursor: pointer;
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.process-card.in-view {
  opacity: 1;
  transform: translateY(0);
}


.process-card.is-active,
.process-card:hover {
  transform: translateY(-8px);
  border-color: rgba(200, 65, 49, 0.4);
  box-shadow: 0 15px 35px rgba(200, 65, 49, 0.15);
}

.process-card h3 {
  font-family: 'Pretendard', sans-serif;
  font-size: 1.13rem;
  font-weight: 600;
  color: #222;
  margin-bottom: 0.5rem;
  transition: color 0.3s ease;
}

.process-card.is-active h3 {
  color: #C84131;
}

.card-divider {
  width: 50px;
  height: 2px;
  background: #C84131;
  margin: 0.5rem 0;
}

.process-body {
  font-size: 1rem;
  line-height: 1.6;
  color: #555;
}

.process-card.is-active .process-body {
  color: #333;
}

.confetti-particle {
  position: fixed;
  pointer-events: none;
  z-index: 10001;
  opacity: 1;
  will-change: transform, opacity;
  background-color: #222;
  border-radius: 40% 60% 55% 45% / 50% 45% 55% 50%;
}

.ink-spread-effect {
  position: absolute;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(200, 65, 49, 0.1) 0%, rgba(200, 65, 49, 0.05) 40%, transparent 70%);
  pointer-events: none;
  z-index: 1;
  opacity: 0;
  transform: scale(1);
  transform-origin: center;
  transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}