/* =================== PROCESS SECTION (Galaxy Orbit Theme) - Upgraded =================== */

.about-process {
  position: relative;
  overflow: hidden;
}

.about-process .section-title {
  margin-bottom: 2rem !important;
  font-family: 'Pretendard', sans-serif;
  letter-spacing: 0.05em;
  font-weight: 700;
  /* [수정] 기본 텍스트 색상 변수 적용 */
  color: var(--text-primary-color);
  /* [수정] 텍스트 그림자는 테마에 따라 달라져야 함 */
  text-shadow: 0 1px 3px rgba(0,0,0,0.1); 
  position: relative;
  z-index: 2;
}

/* [추가] 다크 모드일 때 텍스트 그림자를 밝게 변경 */
body[data-theme="dark"] .about-process .section-title {
  text-shadow: 0 1px 2px rgba(255,255,255,0.1);
}

.process-container {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 2rem;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  background: none;
  overflow: visible;
}

@media (max-width: 820px) {
  .process-container {
      flex-direction: column;
      align-items: center;
  }
}

.process-galaxy-container {
    width: 50%;
    height: 500px;
    position: relative;
    border-radius: 15px;
    overflow: visible;
}

@media (max-width: 820px) {
  .process-galaxy-container {
      width: 90vw;
      height: 55vw;
      max-height: 400px;
      max-width: 400px;
  }
}

/* * 갤럭시 비주얼(배경, 행성 등)은 자체적으로 어두운 테마를 가지고 있어
 * 라이트/다크 모드 모두에서 잘 어울리므로 대부분의 색상 값을 유지합니다.
 */
.process-galaxy-visual {
    position: absolute;
    top: 5%; left: 5%;
    width: 90%; height: 90%;
    background: radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.6) 0%, transparent 60%),
                radial-gradient(circle at 80% 70%, rgba(0, 0, 0, 0.5) 0%, transparent 50%),
                #0a0a0a;
    border-radius: 70% 25% 65% 30% / 65% 30% 70% 25%;
    transform: rotate(1deg) skewX(-1deg) scale(1.02); 
    filter: blur(8px) contrast(1.5); 
    opacity: 0.85; 
    transition: border-radius 0.7s ease-out, transform 0.7s ease-out, filter 0.5s ease-out, opacity 0.3s ease;
    z-index: 1;
    /* [유지] 어두운 그림자는 라이트/다크 모드 모두에서 깊이감을 줌 */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); 
}

.process-galaxy-container:hover .process-galaxy-visual {
  border-radius: 65% 20% 50% 20% / 60% 25% 65% 20%; 
    transform: rotate(-0.5deg) skewX(0.5deg) scale(1.03); 
    filter: blur(6px) contrast(1.8); 
    opacity: 1;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); 
}

.process-galaxy-content {
    position: absolute;
    top: 5%; left: 5%;
    width: 90%; height: 90%;
    background-color: transparent;
    border-radius: 15% 20% 18% 25% / 20% 15% 25% 18%; 
    transform: rotate(1deg) skewX(-1deg) scale(1.02); 
    z-index: 2;
    transition: border-radius 0.7s ease-out, transform 0.7s ease-out;
    overflow: visible; 
}

.process-galaxy-container:hover .process-galaxy-content {
    border-radius: 18% 15% 22% 16% / 12% 20% 16% 22%; 
    transform: rotate(-0.5deg) skewX(0.5deg) scale(1.03); 
}

.star-field {
  position: absolute;
  width: 100%; height: 100%;
  filter: blur(0.5px);
  opacity: 0.6; 
  z-index: 1;
  overflow: visible;
}

.star {
  position: absolute;
  background: white; /* [유지] 별 색상 */
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 3s infinite alternate;
}

@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(1); }
  100% { opacity: 1; transform: scale(1.2); }
}

.process-orbit-svg {
  position: absolute;
  top: 50%; left: 50%;
  width: 80%; height: 80%;
  transform: translate(-50%, -50%) rotate(-45deg);
  overflow: visible;
  z-index: 3;
}

@media (max-width: 820px) {
  .process-orbit-svg { width: 80%; height: 80%; }
}

#orbitPath {
  fill: none;
  stroke: rgba(255, 255, 255, 0.3); /* [유지] 궤도 색상 */
  stroke-width: 2;
}

.process-planet {
  position: absolute;
  width: 70px; height: 70px;
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: rgba(30, 30, 30, 0.8);
  box-shadow: 0 0 15px rgba(255,255,255,0.08), inset 0 0 5px rgba(255,255,255,0.05);
  border: 1px solid rgba(255, 255, 255, 0.05);
  cursor: var(--cursor-grab2);
  z-index: 4;
  transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
}
.process-planet:hover {
  transform: translate(-50%, -50%) var(--planet-rotate, rotate(0deg)) scale(1.1) !important;
  background: rgba(50, 50, 50, 0.9);
  box-shadow: 0 0 20px rgba(255,255,255,0.15), inset 0 0 8px rgba(255,255,255,0.1);
}
.process-planet.is-active {
  transform: translate(-50%, -50%) var(--planet-rotate, rotate(0deg)) scale(1.2) !important;
  background: rgba(80, 80, 80, 0.95);
  box-shadow: 0 0 25px rgba(255,255,255,0.2), 0 0 10px rgba(200, 65, 49, 0.5), inset 0 0 10px rgba(255,255,255,0.2);
}
.planet-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transform: rotate(-45deg);
}
.process-planet .planet-icon,
.process-planet .planet-label {
  color: rgba(227, 227, 227, 0.9); /* [유지] 행성 내 텍스트/아이콘 색상 (어두운 배경에 밝은 텍스트) */
  transition: color 0.2s ease;
}
.process-planet .planet-label {
  font-size: 0.7rem; font-weight: bold; line-height: 1; opacity: 0.8;
}
.process-planet:hover .planet-icon,
.process-planet:hover .planet-label,
.process-planet.is-active .planet-icon,
.process-planet.is-active .planet-label {
  color: white; /* [유지] 호버 시 흰색으로 강조 */
  opacity: 1;
}

/* --- Card styles --- */
.about-process-cols {
  display: grid;
  grid-template-columns: repeat(2, minmax(200px, 1fr));
  gap: 1.2rem 1rem;
  width: 50%;
  z-index: 2;
}
@media (max-width: 820px) {
  .about-process-cols { width: 100%; max-width: 500px; grid-template-columns: 1fr; gap: 1.3rem; }
}

.process-card {
  /* [수정] 라이트 모드 기본 배경 (반투명 흰색) */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  /* [수정] 라이트 모드 기본 테두리 (반투명 검정) */
  border: 1px solid rgba(0, 0, 0, 0.08);
  /* [수정] 라이트 모드 기본 그림자 */
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07);
  padding: 1.5rem 2rem;
  /* [수정] 기본 텍스트 색상 변수 적용 */
  color: var(--text-primary-color);
  cursor: var(--cursor-grab2);
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out, background 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* [추가] 다크 모드 카드 스타일 */
body[data-theme="dark"] .process-card {
  /* --ai-bg-lightest (#2a2a2a)의 RGB 값(42, 42, 42)을 사용 */
  background: rgba(42, 42, 42, 0.75); 
  /* 반투명 흰색 테두리 */
  border: 1px solid rgba(255, 255, 255, 0.1); 
  /* 다크 모드에서는 그림자 제거 또는 약하게 조정 */
  box-shadow: none;
}

.process-card.in-view {
  opacity: 1;
  transform: translateY(0);
}

.process-card.is-active,
.process-card:hover {
  transform: translateY(-8px);
  /* [수정] 강조색을 브랜드 보조 색상 변수로 변경 */
  border-color: var(--brand-secondary);
  /* [수정] 강조색 그림자의 RGB 값을 --brand-secondary(d96570 -> 217,101,112)에 맞춤 */
  box-shadow: 0 15px 35px rgba(217, 101, 112, 0.15);
}
/* [추가] 다크모드에서 호버/활성 시 그림자 조정 */
body[data-theme="dark"] .process-card.is-active,
body[data-theme="dark"] .process-card:hover {
    box-shadow: 0 10px 30px rgba(217, 101, 112, 0.2);
}


.process-card h3 {
  font-family: 'Pretendard', sans-serif;
  font-size: 1.13rem;
  font-weight: 600;
  /* [수정] 기본 텍스트 색상 변수 적용 */
  color: var(--text-primary-color);
  margin-bottom: 0.5rem;
  transition: color 0.3s ease;
}

.process-card.is-active h3 {
  /* [수정] 활성 상태의 h3 색상을 브랜드 보조 색상으로 변경 */
  color: var(--brand-secondary);
}

.card-divider {
  width: 50px;
  height: 2px;
  /* [수정] 구분선 색상을 브랜드 보조 색상으로 변경 */
  background: var(--brand-secondary);
  margin: 0.5rem 0;
}

.process-body {
  font-size: 1rem;
  line-height: 1.6;
  /* [수정] 본문 텍스트에 보조 텍스트 색상 변수 적용 */
  color: var(--text-secondary-color);
}

.process-card.is-active .process-body {
  /* [수정] 활성 상태의 본문 텍스트를 기본 텍스트 색상으로 변경하여 가독성 확보 */
  color: var(--text-primary-color);
}

.confetti-particle {
  position: fixed;
  pointer-events: none;
  z-index: 10001;
  opacity: 1;
  will-change: transform, opacity;
  /* [수정] 색종이 조각이 텍스트 색상을 따라가도록 변경 (라이트:검정, 다크:흰색) */
  background-color: var(--text-primary-color);
  border-radius: 40% 60% 55% 45% / 50% 45% 55% 50%;
}

.ink-spread-effect {
  position: absolute;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  /* [수정] 잉크 번짐 효과의 RGB 값을 --brand-secondary(d96570 -> 217,101,112)에 맞춤 */
  background: radial-gradient(circle, rgba(217, 101, 112, 0.1) 0%, rgba(217, 101, 112, 0.05) 40%, transparent 70%);
  pointer-events: none;
  z-index: 1;
  opacity: 0;
  transform: scale(1);
  transform-origin: center;
  transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}