/* postcard.css */
/* ==========================================================================
   1. THEME COLOR VARIABLES (LIGHT & DARK) - POSTCARD SPECIFIC
   ========================================================================== */

/* This section is removed as theme variables are now integrated into connect.css */

:root {
    /* Font & Transition */
    --western-font: 'Caveat', cursive;
    --eastern-font: 'Nanum Myeongjo', serif;
    /* transition-duration is now in connect.css, but if used locally and specifically, keep it.
       If it's meant to be global, remove from here if connect.css already defines it. */
    /* --transition-duration: 0.3s; */
}


/* ==========================================================================
   2. MAIN CONTAINER & SECTION STYLES
   ========================================================================== */

/* Specific background for postcard section */
#postcard-section {
    background-image: url('../img/Alfheim-dark.png'); /* Newly added */
    background-color: var(--primary-bg); /* Changed to primary-bg */
    background-size: cover;
    background-position: center;
    color: var(--text-color); /* Changed to text-color */
    /* No border-bottom as it's the last section */
    transition: background-color var(--transition-duration), color var(--transition-duration);
    display: flex; /* Added for centering content wrapper */
    justify-content: center; /* Added for centering content wrapper */
    align-items: center; /* Added for centering content wrapper */
    padding: 0; /* Remove padding from section itself */
}

body[data-theme="light"] #postcard-section {
    background-image: url('../img/Alfheim-bright.png');  /* Invert for light mode */
    background-color: var(--primary-bg); /* Changed to primary-bg */
}

/* NEW: Wrapper for postcard content to provide consistent padding */
.connect-postcard-content {
    transition: background-color var(--transition-duration), border-color var(--transition-duration);
    max-width: 900px; /* Adjust max-width as needed for postcard layout */
    width: 100%;
    box-sizing: border-box;
    margin: 80px auto; /* Add margin to top/bottom for spacing within the section */
    display: flex; /* Maintain flex layout for inner postcard elements */
    justify-content: center;
    gap: 30px;
    position: relative; /* Keep relative for floating menus */
    padding-top: 80px; /* Space for floating menus */
}


/* ==========================================================================
   3. POSTCARD & FLOATING MENU STYLES
   ========================================================================== */

/* .postcard-section now becomes the content wrapper's flex container */
.postcard-section {
    /* These styles are moved to .connect-postcard-content */
    /* display: flex; */
    /* justify-content: center; */
    /* gap: 30px; */
    /* width: 100%; */
    margin-bottom: 0; /* Footer comes right below */
    /* position: relative; */
    /* padding-top: 80px; */
    padding-left: 20px; /* Left padding for inner content */
    padding-right: 20px; /* Right padding for inner content */
    box-sizing: border-box; /* Padding included in width */
    opacity: 0;
    transform: translateY(40px);
    
    margin-left: auto;
    margin-right: auto;
}

.connect-floating-menu1, .connect-floating-menu2 { /* Class name confirmed */
    position: absolute;
    top: 20px;
    background-color: var(--primary-bg-opacity); /* Changed to primary-bg-opacity for glass effect */
    backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    -webkit-backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    padding: 8px 12px;
    border-radius: 20px;
    box-shadow: 0 8px 32px var(--glass-shadow); /* Changed to glass-shadow */
    border: 1px solid var(--glass-border); /* Added glass-border */
    z-index: 100;
    display: flex;
    gap: 8px;
    align-items: center;
    transition: background-color var(--transition-duration), border-color var(--transition-duration), box-shadow var(--transition-duration);
}

.connect-floating-menu1 { left: 15px; } /* Class name confirmed */
.connect-floating-menu2 { right: 15px; flex-wrap: wrap; justify-content: flex-end; } /* Class name confirmed */

.connect-floating-menu1 button, /* Class name confirmed */
.connect-floating-menu2 > button, /* Class name confirmed */
.connect-language-controls-inline button, /* Class name confirmed */
.connect-font-size-options-inline button { /* Class name confirmed */
    padding: 6px 10px;
    border: 1px solid var(--glass-border); /* Changed to glass-border */
    border-radius: 15px;
    cursor: pointer;
    background-color: var(--secondary-bg); /* Changed to secondary-bg */
    color: var(--subheading-color); /* Changed to subheading-color */
    font-size: 0.8em;
    font-family: 'Poppins', sans-serif; /* Changed to Poppins for general UI consistency */
    transition: all var(--transition-duration);
    display: inline-flex;
    align-items: center;
    gap: 5px;
    backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    -webkit-backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    box-shadow: 0 2px 8px var(--glass-shadow); /* Added glass-shadow */
}

.connect-floating-menu1 button:hover, /* Class name confirmed */
.connect-floating-menu2 > button:hover, /* Class name confirmed */
.connect-language-controls-inline button:hover, /* Class name confirmed */
.connect-font-size-options-inline button:hover { /* Class name confirmed */
    border-color: var(--primary-accent); /* Changed to primary-accent */
    box-shadow: 0 4px 12px var(--glass-shadow); /* Enhanced shadow on hover */
    transform: translateY(-2px); /* Slight lift on hover */
}

.connect-floating-menu1 button.active, /* Class name confirmed */
.connect-floating-menu2 > button.active, /* Class name confirmed */
.connect-language-controls-inline button.active, /* Class name confirmed */
.connect-font-size-options-inline button.active { /* Class name confirmed */
    background: var(--point-gradient); /* Changed to point-gradient */
    color: #FFF !important; /* Force white for active buttons on gradient */
    border-color: transparent; /* Border will be handled by the gradient */
    font-weight: bold;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Stronger shadow for active */
    transform: translateY(-1px); /* Slight lift for active */
}

.connect-floating-menu1 button.active i, /* Class name confirmed */
.connect-floating-menu1 button.active .theme-style-text, /* Class name confirmed */
.connect-floating-menu2 > button.active i, /* Class name confirmed */
.connect-floating-menu2 > button.active .theme-style-text { /* Class name confirmed */
    color: #FFF !important; /* Force white icon/text color */
}

.connect-language-controls-inline, /* Class name confirmed */
.connect-font-size-options-inline { /* Class name confirmed */
    display: flex;
    gap: 8px;
    align-items: center;
}

.postcard-front,
.postcard-back {
    flex: 1 1 auto; /* Flex-basis: auto added for flexibility */
    min-width: 300px;
    max-width: 450px;
    min-height: 550px;
    height: 650px;
    border-radius: 10px;
    box-shadow: 0 8px 32px var(--glass-shadow); /* Changed to glass-shadow */
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: transform 0.5s ease-out, opacity 0.5s ease-out, background-color var(--transition-duration), border-color var(--transition-duration);
    background-color: var(--primary-bg-opacity); /* Changed to primary-bg-opacity */
    backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    -webkit-backdrop-filter: var(--glass-blur); /* Added glassmorphism blur */
    border: 1px solid var(--glass-border); /* Changed to glass-border */
}

.postcard-image-container {
    flex-grow: 1;
    overflow: hidden;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

.postcard-cover-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-bottom: 1px solid var(--glass-border); /* Changed to glass-border */
}

.postcard-info {
    padding: 15px;
    text-align: center;
    background-color: rgba(0, 0, 0, 0.6); /* Keep fixed overlay color for info */
    border-top: 1px solid var(--glass-border); /* Changed to glass-border */
    color: var(--text-color); /* Ensure text is visible on overlay */
}

.qr-code { width: 70px; height: 70px; margin: 0 auto 10px; display: block; border-radius: 4px; background-color: #FFF; padding: 4px; } /* QR code white background */
.info-text { font-size: 0.9em; color: #fff; } /* Keep white text for info overlay */

.western-text { font-family: var(--western-font), sans-serif; }
.eastern-text { font-family: var(--eastern-font), serif; }

.postcard-back { padding: 20px; box-sizing: border-box; background: var(--primary-bg-opacity); } /* Changed to primary-bg-opacity */
.stamp-area { position: absolute; top: 15px; right: 15px; }

.stamp {
    width: 80px; height: 100px; display: flex; justify-content: center; align-items: center; text-align: center; font-weight: bold;
    font-size: 0.9em; line-height: 1.2; padding: 5px; box-sizing: border-box; word-wrap: break-word; overflow: hidden;
    color: var(--subheading-color); /* Changed to subheading-color */
    border: 2px dashed var(--subheading-color); /* Changed to subheading-color */
    background: none;
    transition: color var(--transition-duration), border-color var(--transition-duration);
}

.pen-cursor { cursor: url('../img/pen.png') 0 32, auto; }
.brush-cursor { cursor: url('../img/brush.png') 0 32, auto; }
.western-stamp, .eastern-stamp { font-family: 'Times New Roman', Times, serif; } /* Specific font for stamp */

.form-container { margin-top: 30px; height: calc(100% - 30px); display: flex; flex-direction: column; }
.form-container h3 { text-align: center; margin-bottom: 20px; color: var(--text-color); font-weight: bold; } /* Changed to text-color */
.form-group { margin-bottom: 12px; }
.form-group label { display: block; margin-bottom: 6px; font-weight: normal; color: var(--subheading-color); font-size: 0.95em; } /* Changed to subheading-color */

.form-container input[type="text"],
.form-container input[type="email"],
.form-container textarea {
    width: 100%; padding: 10px 12px; border: none; border-bottom: 1.5px solid var(--glass-border); /* Changed to glass-border */
    border-radius: 0; box-sizing: border-box; background-color: transparent; color: var(--text-color); /* Changed to text-color */
    font-size: 1em; transition: border-bottom-color var(--transition-duration) ease; /* Changed to transition-duration */
}

.form-container input:focus,
.form-container textarea:focus {
    outline: none;
    border-bottom-color: var(--primary-accent); /* Changed to primary-accent */
    background-color: var(--input-focus-bg); /* Added input focus background */
    box-shadow: 0 0 0 3px var(--input-focus-shadow); /* Added input focus shadow */
}

.form-container input.invalid,
.form-container textarea.invalid { border-bottom-color: var(--error-color); animation: shake 0.4s ease-in-out; } /* Changed to error-color */
.error-message { display: none; color: var(--error-color); font-size: 0.85em; padding-top: 5px; font-family: 'Poppins', sans-serif; font-weight: 500; } /* Changed to error-color and Poppins */
.error-message.visible { display: block; animation: fadeIn 0.3s ease-in; }

.western-theme .form-container input[type="text"],
.western-theme .form-container input[type="email"],
.western-theme .form-container textarea { font-family: var(--western-font); font-size: 1.3em; line-height: 1.6; }

.eastern-theme .form-container input[type="text"],
.eastern-theme .form-container input[type="email"],
.eastern-theme .form-container textarea { font-family: var(--eastern-font); font-size: 1.15em; line-height: 1.7; }

.form-container textarea { resize: none; min-height: 100px; }

.send-button {
    display: block; width: 100%; padding: 12px 15px; background: var(--point-gradient); /* Changed to point-gradient */
    color: #FFF; /* Hardcoded white for buttons on gradient */
    border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; font-weight: bold;
    transition: background-color var(--transition-duration) ease, transform 0.2s ease, color var(--transition-duration) ease; /* Changed to transition-duration */
    margin-top: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Added general button shadow */
}

.send-button:hover { filter: brightness(1.15); transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25); } /* Adjusted hover for gradient */
body[data-theme="dark"] .send-button { color: #FFF; } /* Ensure text remains white on dark theme gradient */

.hidden { display: none !important; opacity: 0; visibility: hidden; pointer-events: none; }

/* ==========================================================================
   4. RESPONSIVE MEDIA QUERIES (POSTCARD SECTION)
   ========================================================================== */

@media (max-width: 900px) {
    .connect-postcard-content { /* Apply flex-direction to the new content wrapper */
        flex-direction: column; /* Stack postcards vertically */
        align-items: center; /* Center stacked postcards */
        padding-top: 50px; /* Adjust padding for stacked menus */
        gap: 25px; /* Adjust gap between stacked postcards */
        margin: 40px auto; /* Adjust margin for smaller screens */
    }
    .connect-floating-menu1, .connect-floating-menu2 { /* Class name confirmed */
        position: relative; /* Make menus relative for stacking */
        width: 100%;
        justify-content: center;
        top: auto; left: auto; right: auto;
        margin-bottom: 10px;
    }
    .connect-floating-menu2 { /* Class name confirmed */
        flex-direction: column; /* Stack buttons in menu 2 */
        gap: 10px;
    }
}

@media (max-width: 768px) {
    .postcard-front, .postcard-back {
        width: 90%;
        max-width: 400px; /* Constrain max width for single column */
        height: auto; /* Allow height to adjust */
        min-height: 500px; /* Maintain a minimum height */
    }
    .connect-postcard-content {
        padding: 15px; /* Adjust padding for smaller screens */
    }
}

@media (max-width: 480px) {
    .connect-floating-menu1 button, /* Class name confirmed */
    .connect-floating-menu2 > button, /* Class name confirmed */
    .connect-language-controls-inline button, /* Class name confirmed */
    .connect-font-size-options-inline button { /* Class name confirmed */
        font-size: 0.75em;
        padding: 5px 8px;
    }
    .postcard-info {
        padding: 10px;
    }
    .qr-code {
        width: 60px;
        height: 60px;
    }
    .info-text {
        font-size: 0.8em;
    }
    .form-container h3 {
        font-size: 1.1em;
        margin-bottom: 15px;
    }
    .form-group label {
        font-size: 0.9em;
    }
    .form-container input[type="text"],
    .form-container input[type="email"],
    .form-container textarea {
        font-size: 0.95em;
        padding: 8px 10px;
    }
    .western-theme .form-container input[type="text"],
    .western-theme .form-container input[type="email"],
    .western-theme .form-container textarea {
        font-size: 1.1em;
    }
    .eastern-theme .form-container input[type="text"],
    .eastern-theme .form-container input[type="email"],
    .eastern-theme .form-container textarea {
        font-size: 1em;
    }
    .send-button {
        font-size: 1em;
        padding: 10px 12px;
    }
    .connect-postcard-content {
        margin: 20px auto; /* Further adjust margin for very small screens */
        padding: 10px;
    }
}